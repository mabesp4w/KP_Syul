import{u as E,r as d,z as u,b as H,j as e,H as O,L as B,a as w}from"./app-DtJ35xiz.js";import{A as D}from"./AdminLayout-BH41KSEt.js";import{M as z,C as T}from"./ConfirmDialog-DwnvgXmc.js";import{B as c}from"./Button-MploRZnw.js";import{S as I}from"./SearchBox-CSScaDuk.js";import{o as $,s as W}from"./schemas-DYt2ce8c.js";import"./Badge-bqPMSCrt.js";import"./AOSWrapper-CyGhR2Oq.js";const F=$({nm_prov:W().min(1,"Nama provinsi wajib diisi").max(255,"Nama provinsi maksimal 255 karakter")});function X({auth:y,provinsi:t,filters:S}){const{flash:l}=E().props,[C,g]=d.useState(!1),[_,m]=d.useState(!1),[r,o]=d.useState(null),[h,i]=d.useState(!1);d.useEffect(()=>{l?.success&&u.success(l.success),l?.error&&u.error(l.error)},[l]);const{data:v,setData:j,post:M,processing:f,errors:b,reset:P}=H({nm_prov:""}),N=(s=null)=>{s?(o(s),j({nm_prov:s.nm_prov})):(o(null),j({nm_prov:""})),g(!0)},x=()=>{g(!1),o(null),P()},k=s=>{if(s.preventDefault(),i(!0),!F.safeParse(v).success){i(!1);return}r?w.patch(`/admin/provinsi/${r.id}`,v,{preserveScroll:!0,onSuccess:()=>{x(),i(!1)},onError:a=>{if(console.error("Update error:",a),a&&Object.keys(a).length>0&&!a.message){const n=Object.values(a)[0];u.error(Array.isArray(n)?n[0]:n)}i(!1)}}):M("/admin/provinsi",{preserveScroll:!0,onSuccess:()=>{x(),i(!1)},onError:a=>{if(console.error("Create error:",a),a&&Object.keys(a).length>0&&!a.message){const n=Object.values(a)[0];u.error(Array.isArray(n)?n[0]:n)}i(!1)}})},L=s=>{o(s),m(!0)},A=()=>{r&&w.delete(`/admin/provinsi/${r.id}`,{preserveScroll:!0,onSuccess:()=>{m(!1),o(null)},onError:s=>{console.error("Delete error:",s),m(!1)}})};return e.jsxs(D,{auth:y,children:[e.jsx(O,{title:"Manajemen Provinsi"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4","data-aos":"fade-down",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Manajemen Provinsi"}),e.jsx("p",{className:"text-base-content/70 mt-1",children:"Kelola data provinsi di Indonesia"})]}),e.jsxs(c,{onClick:()=>N(),variant:"primary",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Tambah Provinsi"]})]}),e.jsx("div",{className:"card bg-base-100 shadow-sm","data-aos":"fade-up","data-aos-delay":"100",children:e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"flex items-end justify-end",children:e.jsx(I,{placeholder:"Cari provinsi...",defaultValue:S?.search||"",route:"/admin/provinsi",debounceMs:500})})})}),e.jsx("div",{className:"card bg-base-100 shadow-sm","data-aos":"fade-up","data-aos-delay":"200",children:e.jsxs("div",{className:"card-body p-0",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Nama Provinsi"}),e.jsx("th",{className:"text-right",children:"Aksi"})]})}),e.jsx("tbody",{children:t.data.length>0?t.data.map((s,p)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.from+p}),e.jsx("td",{className:"font-medium",children:s.nm_prov}),e.jsx("td",{children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>N(s),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]}),e.jsxs(c,{variant:"error",size:"sm",onClick:()=>L(s),children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Hapus"]})]})})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"text-center py-8 text-base-content/50",children:"Tidak ada data provinsi"})})})]})}),t.links.length>3&&e.jsx("div",{className:"card-body border-t border-base-300",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"join",children:t.links.map((s,p)=>e.jsx(B,{href:s.url||"#",className:`join-item btn btn-sm ${s.active?"btn-active":""} ${s.url?"":"btn-disabled"}`,dangerouslySetInnerHTML:{__html:s.label}},p))})})})]})})]}),e.jsx(z,{id:"provinsi-modal",isOpen:C,onClose:()=>!h&&x(),title:r?"Edit Provinsi":"Tambah Provinsi",size:"md",footer:e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"ghost",onClick:x,disabled:h,children:"Batal"}),e.jsx(c,{variant:"primary",onClick:k,loading:h||f,children:r?"Simpan Perubahan":"Tambah"})]}),children:e.jsx("form",{onSubmit:k,children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Nama Provinsi ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{type:"text",placeholder:"Masukkan nama provinsi",className:`input input-bordered w-full ${b.nm_prov?"input-error":""}`,value:v.nm_prov,onChange:s=>j("nm_prov",s.target.value),disabled:h||f}),b.nm_prov&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:b.nm_prov})})]})})})}),e.jsx(T,{id:"delete-provinsi-dialog",isOpen:_,onClose:()=>m(!1),onConfirm:A,title:"Hapus Provinsi",message:`Apakah Anda yakin ingin menghapus provinsi "${r?.nm_prov}"?`,confirmText:"Hapus",cancelText:"Batal",variant:"error",loading:f})]})}export{X as default};
