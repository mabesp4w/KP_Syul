import{u as D,r as j,z as g,j as e,H as T,a as x}from"./app-DtJ35xiz.js";import{M as E,C as L}from"./ConfirmDialog-DwnvgXmc.js";import{B as v}from"./Button-MploRZnw.js";import{S as H}from"./SearchBox-CSScaDuk.js";import{A as I}from"./AdminLayout-BH41KSEt.js";import{u as q,o as z,c as V,a as U,d as p}from"./index.esm-BBRPuYfN.js";import"./Badge-bqPMSCrt.js";import"./AOSWrapper-CyGhR2Oq.js";const W=V({nm_prog:p().required("Nama program wajib diisi").max(255,"Nama program maksimal 255 karakter"),kat:p().required("Kategori wajib dipilih"),desk:p().required("Deskripsi wajib diisi"),tgt_pst:p().required("Target peserta wajib diisi").max(255,"Target peserta maksimal 255 karakter"),durasi:p().required("Durasi wajib diisi").max(255,"Durasi maksimal 255 karakter"),biaya:p().optional().test("is-number","Biaya harus berupa angka positif",h=>{if(!h||h==="")return!0;const t=parseFloat(h);return!isNaN(t)&&t>=0}),is_active:U().default(!0)}),R=["PAUD","Paket A","Paket B","Paket C","Keaksaraan Dasar","Keaksaraan Usaha Mandiri","Kursus","Pendidikan Perempuan"];function le({auth:h,programPendidikan:t,kategori:w,filters:n}){const{flash:u}=D().props,[S,f]=j.useState(!1),[P,b]=j.useState(!1),[i,m]=j.useState(null),[G,J]=j.useState(0);j.useEffect(()=>{u?.success&&g.success(u.success),u?.error&&g.error(u.error)},[u]);const{register:c,handleSubmit:M,reset:k,setValue:d,watch:A,formState:{errors:s,isSubmitting:y}}=q({resolver:z(W),defaultValues:{nm_prog:"",kat:"",desk:"",tgt_pst:"",durasi:"",biaya:"",is_active:!0}}),C=A("is_active"),_=(a=null)=>{a?(m(a),d("nm_prog",a.nm_prog),d("kat",a.kat),d("desk",a.desk),d("tgt_pst",a.tgt_pst),d("durasi",a.durasi),d("biaya",a.biaya?String(a.biaya):""),d("is_active",a.is_active??!0)):(m(null),k({nm_prog:"",kat:"",desk:"",tgt_pst:"",durasi:"",biaya:"",is_active:!0})),f(!0)},N=()=>{f(!1),m(null),k({nm_prog:"",kat:"",desk:"",tgt_pst:"",durasi:"",biaya:"",is_active:!0})},$=a=>{const l={...a,biaya:a.biaya?parseFloat(a.biaya):null};i?x.patch(`/admin/program-pendidikan/${i.id}`,l,{preserveScroll:!0,onSuccess:()=>{N()},onError:r=>{if(console.error("Update error:",r),r&&Object.keys(r).length>0&&!r.message){const o=Object.values(r)[0];g.error(Array.isArray(o)?o[0]:o)}}}):x.post("/admin/program-pendidikan",l,{preserveScroll:!0,onSuccess:()=>{k({nm_prog:"",kat:"",desk:"",tgt_pst:"",durasi:"",biaya:"",is_active:!0})},onError:r=>{if(console.error("Create error:",r),r&&Object.keys(r).length>0&&!r.message){const o=Object.values(r)[0];g.error(Array.isArray(o)?o[0]:o)}}})},K=a=>{m(a),b(!0)},F=()=>{i&&x.delete(`/admin/program-pendidikan/${i.id}`,{preserveScroll:!0,onSuccess:()=>{b(!1),m(null)},onError:a=>{console.error("Delete error:",a),b(!1)}})},O=a=>{const l=a.target.value;x.get("/admin/program-pendidikan",{...n,kat:l||null},{preserveState:!0,replace:!0})},B=a=>{const l=a.target.value;x.get("/admin/program-pendidikan",{...n,is_active:l||null},{preserveState:!0,replace:!0})};return e.jsxs(I,{auth:h,children:[e.jsx(T,{title:"Manajemen Program Pendidikan"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center","data-aos":"fade-down",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-base-content",children:"Program Pendidikan"}),e.jsx("p",{className:"mt-1 text-base-content/70",children:"Kelola data program pendidikan"})]}),e.jsxs(v,{onClick:()=>_(),className:"btn-primary",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Tambah Program"]})]}),e.jsx("div",{className:"card bg-base-100 shadow-sm","data-aos":"fade-up","data-aos-delay":"100",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-1 items-end justify-end gap-4 md:grid-cols-3",children:[e.jsx(H,{placeholder:"Cari program pendidikan...",defaultValue:n?.search||"",route:"/admin/program-pendidikan",routeParams:n,debounceMs:500}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Filter Kategori"})}),e.jsxs("select",{className:"select-bordered select w-full",value:n?.kat||"",onChange:O,children:[e.jsx("option",{value:"",children:"Semua Kategori"}),w.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Filter Status"})}),e.jsxs("select",{className:"select-bordered select w-full",value:n?.is_active!==void 0?String(n.is_active):"",onChange:B,children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"1",children:"Aktif"}),e.jsx("option",{value:"0",children:"Tidak Aktif"})]})]})]})})}),e.jsx("div",{className:"card bg-base-100 shadow-sm","data-aos":"fade-up","data-aos-delay":"200",children:e.jsx("div",{className:"card-body p-0",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"No"}),e.jsx("th",{children:"Nama Program"}),e.jsx("th",{children:"Kategori"}),e.jsx("th",{children:"Target Peserta"}),e.jsx("th",{children:"Durasi"}),e.jsx("th",{children:"Biaya"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Aksi"})]})}),e.jsx("tbody",{children:t.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"py-8 text-center text-base-content/70",children:"Tidak ada data program pendidikan"})}):t.data.map((a,l)=>e.jsxs("tr",{children:[e.jsx("td",{children:t.from+l}),e.jsxs("td",{children:[e.jsx("div",{className:"font-medium",children:a.nm_prog}),a.desk&&e.jsx("div",{className:"line-clamp-1 text-sm text-base-content/70",children:a.desk})]}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-outline",children:a.kat})}),e.jsx("td",{children:a.tgt_pst}),e.jsx("td",{children:a.durasi}),e.jsx("td",{children:a.biaya?new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a.biaya):e.jsx("span",{className:"text-base-content/50",children:"-"})}),e.jsx("td",{children:a.is_active?e.jsx("span",{className:"badge badge-success",children:"Aktif"}):e.jsx("span",{className:"badge badge-error",children:"Tidak Aktif"})}),e.jsx("td",{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>_(a),title:"Edit",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{className:"btn text-error btn-ghost btn-sm",onClick:()=>K(a),title:"Hapus",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},a.id))})]})})})}),t.links.length>3&&e.jsx("div",{className:"flex justify-center","data-aos":"fade-up","data-aos-delay":"300",children:e.jsx("div",{className:"join",children:t.links.map((a,l)=>e.jsx("button",{className:`btn join-item ${a.active?"btn-active":""} ${a.url?"":"btn-disabled"}`,onClick:()=>a.url&&x.get(a.url),dangerouslySetInnerHTML:{__html:a.label}},l))})}),e.jsx(E,{isOpen:S,onClose:N,title:i?"Edit Program Pendidikan":"Tambah Program Pendidikan",size:"4xl",children:e.jsxs("form",{onSubmit:M($),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Nama Program ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{type:"text",className:`input-bordered input w-full ${s.nm_prog?"input-error":""}`,...c("nm_prog"),placeholder:"Masukkan nama program"}),s.nm_prog&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.nm_prog.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Kategori ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsxs("select",{className:`select-bordered select w-full ${s.kat?"select-error":""}`,...c("kat"),children:[e.jsx("option",{value:"",children:"Pilih Kategori"}),R.map(a=>e.jsx("option",{value:a,children:a},a))]}),s.kat&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.kat.message})})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Deskripsi ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("textarea",{className:`textarea-bordered textarea w-full ${s.desk?"textarea-error":""}`,...c("desk"),placeholder:"Masukkan deskripsi program",rows:"4"}),s.desk&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.desk.message})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Target Peserta ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{type:"text",className:`input-bordered input w-full ${s.tgt_pst?"input-error":""}`,...c("tgt_pst"),placeholder:"Masukkan target peserta"}),s.tgt_pst&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.tgt_pst.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Durasi ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{type:"text",className:`input-bordered input w-full ${s.durasi?"input-error":""}`,...c("durasi"),placeholder:"Contoh: 6 bulan, 1 tahun, dll"}),s.durasi&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.durasi.message})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Biaya (Opsional)"})}),e.jsx("input",{type:"text",className:`input-bordered input w-full ${s.biaya?"input-error":""}`,...c("biaya"),placeholder:"Masukkan biaya (kosongkan jika gratis)"}),s.biaya&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.biaya.message})})]}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("span",{className:"label-text",children:"Status Aktif"}),e.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:C,...c("is_active")})]})})]}),e.jsxs("div",{className:"modal-action",children:[e.jsx(v,{type:"button",onClick:N,className:"btn-ghost",children:"Batal"}),e.jsx(v,{type:"submit",className:"btn-primary",disabled:y,children:y?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-sm loading-spinner"}),i?"Menyimpan...":"Menambahkan..."]}):i?"Simpan Perubahan":"Tambah Program"})]})]})}),e.jsx(L,{isOpen:P,onClose:()=>{b(!1),m(null)},onConfirm:F,title:"Hapus Program Pendidikan",message:`Apakah Anda yakin ingin menghapus program "${i?.nm_prog}"?`})]})]})}export{le as default};
