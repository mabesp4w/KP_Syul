import{r as l,j as s}from"./app-DtJ35xiz.js";function S({levels:t=[],onChange:f,values:c={},errors:u={},disabled:x=!1,className:h="",gridLayout:p=null}){const[j,g]=l.useState({});l.useEffect(()=>{const n={};t.forEach((a,r)=>{if(r===0)n[a.name]=a.options||[];else{const o=a.dependsOn,i=c[o];if(i)if(a.filterFn)n[a.name]=(a.options||[]).filter(d=>a.filterFn(d,i,c));else{const d=a.foreignKey||o;n[a.name]=(a.options||[]).filter(e=>String(e[d])===String(i))}else n[a.name]=[]}}),g(n)},[t,c]);const N=(n,a)=>{const r=t.findIndex(o=>o.name===n);r!==-1&&t.slice(r+1).forEach(o=>{f(o.name,"")}),f(n,a)},b=(n,a)=>{const r=j[n.name]||[],o=c[n.name]||"",i=u[n.name],d=x||a>0&&!c[t[a-1].name];return s.jsxs("div",{className:"form-control",children:[s.jsx("label",{className:"label",children:s.jsxs("span",{className:"label-text",children:[n.label,n.required&&s.jsx("span",{className:"text-error",children:" *"})]})}),s.jsxs("select",{className:`select select-bordered w-full ${i?"select-error":""} ${d?"select-disabled":""}`,value:o,onChange:e=>N(n.name,e.target.value),disabled:d,children:[s.jsx("option",{value:"",children:a===0?n.placeholder||`Pilih ${n.label}`:c[n.dependsOn]?n.placeholder||`Pilih ${n.label}`:`Pilih ${t[a-1].label} terlebih dahulu`}),r.map(e=>{const m=e[n.optionValue||"id"],$=n.optionLabel?typeof n.optionLabel=="function"?n.optionLabel(e):e[n.optionLabel]:e.name||e.label||String(m);return s.jsx("option",{value:m,children:$},m)})]}),i&&s.jsx("label",{className:"label",children:s.jsx("span",{className:"label-text-alt text-error",children:typeof i=="string"?i:i?.message||"Field ini wajib diisi"})})]},n.name)};return p&&Array.isArray(p)?s.jsx("div",{className:`space-y-4 ${h}`,children:p.map((n,a)=>s.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:n.map(r=>r>=0&&r<t.length?b(t[r],r):null)},a))}):s.jsx("div",{className:`space-y-4 ${h}`,children:t.map((n,a)=>b(n,a))})}export{S};
