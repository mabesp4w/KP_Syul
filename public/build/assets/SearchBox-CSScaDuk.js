import{u as O,r as s,a as T,j as o}from"./app-DtJ35xiz.js";function M({placeholder:v="Cari...",defaultValue:u="",onSearch:b,debounceMs:E=500,className:L="",showIcon:g=!0,route:w=null,routeParams:f={},preserveState:S=!0,replace:C=!0,...N}){const{url:p}=O(),[i,a]=s.useState(u),d=s.useRef(null),R=s.useRef(!0),x=s.useRef(f),n=s.useRef(null),j=s.useRef("");s.useEffect(()=>{x.current=f},[f]),s.useEffect(()=>{if(w){const r=()=>{try{const t=window.location.href,c=new URL(t),l=c.searchParams.get("search")||"";if(t!==j.current){j.current=t,l!==i&&l!==n.current&&a(l);const e={};c.searchParams.forEach((h,m)=>{m!=="search"&&(e[m]=h)}),x.current={...e,...f}}}catch{u!==i&&u!==n.current&&a(u)}};r(),p!==j.current&&r()}else u!==i&&u!==n.current&&a(u)},[p,u,w,f]),s.useEffect(()=>{if(R.current){R.current=!1;return}return d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{const r=i;if(n.current=r,b)b(r),setTimeout(()=>{n.current===r&&(n.current=null)},100);else if(w){let t={};try{new URL(window.location.href).searchParams.forEach((h,m)=>{m!=="search"&&(t[m]=h)})}catch{t={}}const c={...t,...x.current,search:r};Object.keys(c).forEach(e=>{e!=="search"&&(c[e]===null||c[e]===void 0||c[e]==="")&&delete c[e]});const l=()=>{try{const h=new URL(window.location.href).searchParams.get("search")||"";j.current=window.location.href,h!==r&&a(h),setTimeout(()=>{n.current===r&&(n.current=null)},50)}catch{n.current=null}};T.get(w,c,{preserveState:S,replace:C,onSuccess:l,onFinish:l})}},E),()=>{d.current&&clearTimeout(d.current)}},[i]);const P=r=>{const t=r.target.value;n.current=null,a(t)},U=()=>{a("")};return o.jsx("div",{className:`form-control w-full ${L}`.trim(),children:o.jsxs("div",{className:"join w-full",children:[g&&o.jsx("div",{className:"join-item bg-base-200 flex items-center justify-center px-3 border border-base-300 border-r-0 rounded-l-lg",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-base-content/70",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsx("input",{type:"text",placeholder:v,className:`input input-bordered join-item flex-1 ${g?"":"rounded-l-lg"} ${i?"":"rounded-r-lg"}`,value:i,onChange:P,...N}),i&&o.jsx("button",{type:"button",className:"btn btn-square join-item rounded-r-lg",onClick:U,title:"Hapus pencarian",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})}export{M as S};
