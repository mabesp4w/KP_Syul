import{r as _,u as te,j as e,z as L,H as me,a as C}from"./app-DtJ35xiz.js";import{M as ve,C as ge}from"./ConfirmDialog-DwnvgXmc.js";import{B as P}from"./Button-MploRZnw.js";import{S as be}from"./SearchBox-CSScaDuk.js";import{A as xe}from"./AdminLayout-BH41KSEt.js";import{u as ye,C as je,o as _e,c as ke,a as we,b as Ne,d as I,e as Se}from"./index.esm-BBRPuYfN.js";import"./Badge-bqPMSCrt.js";import"./AOSWrapper-CyGhR2Oq.js";var B={exports:{}},M,q;function Ce(){if(q)return M;q=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return M=a,M}var R,W;function Ee(){if(W)return R;W=1;var a=Ce();function r(){}function l(){}return l.resetWarningCache=r,R=function(){function i(n,c,d,h,m,p){if(p!==a){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}i.isRequired=i;function o(){return i}var u={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:l,resetWarningCache:r};return u.PropTypes=u,u},R}var J;function Oe(){return J||(J=1,B.exports=Ee()()),B.exports}var t=Oe(),H=function(){return H=Object.assign||function(a){for(var r,l=1,i=arguments.length;l<i;l++){r=arguments[l];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(a[o]=r[o])}return a},H.apply(this,arguments)},re={onActivate:t.func,onAddUndo:t.func,onBeforeAddUndo:t.func,onBeforeExecCommand:t.func,onBeforeGetContent:t.func,onBeforeRenderUI:t.func,onBeforeSetContent:t.func,onBeforePaste:t.func,onBlur:t.func,onChange:t.func,onClearUndos:t.func,onClick:t.func,onContextMenu:t.func,onCommentChange:t.func,onCompositionEnd:t.func,onCompositionStart:t.func,onCompositionUpdate:t.func,onCopy:t.func,onCut:t.func,onDblclick:t.func,onDeactivate:t.func,onDirty:t.func,onDrag:t.func,onDragDrop:t.func,onDragEnd:t.func,onDragGesture:t.func,onDragOver:t.func,onDrop:t.func,onExecCommand:t.func,onFocus:t.func,onFocusIn:t.func,onFocusOut:t.func,onGetContent:t.func,onHide:t.func,onInit:t.func,onInput:t.func,onKeyDown:t.func,onKeyPress:t.func,onKeyUp:t.func,onLoadContent:t.func,onMouseDown:t.func,onMouseEnter:t.func,onMouseLeave:t.func,onMouseMove:t.func,onMouseOut:t.func,onMouseOver:t.func,onMouseUp:t.func,onNodeChange:t.func,onObjectResizeStart:t.func,onObjectResized:t.func,onObjectSelected:t.func,onPaste:t.func,onPostProcess:t.func,onPostRender:t.func,onPreProcess:t.func,onProgressState:t.func,onRedo:t.func,onRemove:t.func,onReset:t.func,onSaveContent:t.func,onSelectionChange:t.func,onSetAttrib:t.func,onSetContent:t.func,onShow:t.func,onSubmit:t.func,onUndo:t.func,onVisualAid:t.func,onSkinLoadError:t.func,onThemeLoadError:t.func,onModelLoadError:t.func,onPluginLoadError:t.func,onIconsLoadError:t.func,onLanguageLoadError:t.func,onScriptsLoad:t.func,onScriptsLoadError:t.func},Te=H({apiKey:t.string,licenseKey:t.string,id:t.string,inline:t.bool,init:t.object,initialValue:t.string,onEditorChange:t.func,value:t.string,tagName:t.string,tabIndex:t.number,cloudChannel:t.string,plugins:t.oneOfType([t.string,t.array]),toolbar:t.oneOfType([t.string,t.array]),disabled:t.bool,readonly:t.bool,textareaName:t.string,tinymceScriptSrc:t.oneOfType([t.string,t.arrayOf(t.string),t.arrayOf(t.shape({src:t.string,async:t.bool,defer:t.bool}))]),rollback:t.oneOfType([t.number,t.oneOf([!1])]),scriptLoading:t.shape({async:t.bool,defer:t.bool,delay:t.number})},re),ae=function(a){var r=a;return r&&r.tinymce?r.tinymce:null},F=function(a){return typeof a=="function"},G=function(a){return a in re},X=function(a){return a.substr(2)},Ie=function(a,r,l,i,o,u,n){var c=Object.keys(o).filter(G),d=Object.keys(u).filter(G),h=c.filter(function(p){return u[p]===void 0}),m=d.filter(function(p){return o[p]===void 0});h.forEach(function(p){var f=X(p),v=n[f];l(f,v),delete n[f]}),m.forEach(function(p){var f=i(a,p),v=X(p);n[v]=f,r(v,f)})},Le=function(a,r,l,i,o){return Ie(o,a.on.bind(a),a.off.bind(a),function(u,n){return function(c){var d;return(d=u(n))===null||d===void 0?void 0:d(c,a)}},r,l,i)},Y=0,ie=function(a){var r=Date.now(),l=Math.floor(Math.random()*1e9);return Y++,a+"_"+l+Y+String(r)},Q=function(a){return a!==null&&(a.tagName.toLowerCase()==="textarea"||a.tagName.toLowerCase()==="input")},Z=function(a){return typeof a>"u"||a===""?[]:Array.isArray(a)?a:a.split(" ")},De=function(a,r){return Z(a).concat(Z(r))},Pe=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},Be=function(a){if(!("isConnected"in Node.prototype)){for(var r=a,l=a.parentNode;l!=null;)r=l,l=r.parentNode;return r===a.ownerDocument}return a.isConnected},ee=function(a,r){a!==void 0&&(a.mode!=null&&typeof a.mode=="object"&&typeof a.mode.set=="function"?a.mode.set(r):a.setMode(r))},Me=function(a){var r=ae(a);if(!r)throw new Error("tinymce should have been loaded into global scope");return r},ne=function(a){return a.options&&a.options.isRegistered("disabled")},V=function(){return V=Object.assign||function(a){for(var r,l=1,i=arguments.length;l<i;l++){r=arguments[l];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(a[o]=r[o])}return a},V.apply(this,arguments)},Re=function(a,r,l){var i,o,u=a.createElement("script");u.referrerPolicy="origin",u.type="application/javascript",u.id=r.id,u.src=r.src,u.async=(i=r.async)!==null&&i!==void 0?i:!1,u.defer=(o=r.defer)!==null&&o!==void 0?o:!1;var n=function(){u.removeEventListener("load",n),u.removeEventListener("error",c),l(r.src)},c=function(d){u.removeEventListener("load",n),u.removeEventListener("error",c),l(r.src,d)};u.addEventListener("load",n),u.addEventListener("error",c),a.head&&a.head.appendChild(u)},Fe=function(a){var r={},l=function(n,c){var d=r[n];d.done=!0,d.error=c;for(var h=0,m=d.handlers;h<m.length;h++){var p=m[h];p(n,c)}d.handlers=[]},i=function(n,c,d){var h=function(N){return d!==void 0?d(N):console.error(N)};if(n.length===0){h(new Error("At least one script must be provided"));return}for(var m=0,p=!1,f=function(N,k){p||(k?(p=!0,h(k)):++m===n.length&&c())},v=0,g=n;v<g.length;v++){var b=g[v],x=r[b.src];if(x)x.done?f(b.src,x.error):x.handlers.push(f);else{var E=ie("tiny-");r[b.src]={id:E,src:b.src,done:!1,error:null,handlers:[f]},Re(a,V({id:E},b),l)}}},o=function(){for(var n,c=0,d=Object.values(r);c<d.length;c++){var h=d[c],m=a.getElementById(h.id);m!=null&&m.tagName==="SCRIPT"&&((n=m.parentNode)===null||n===void 0||n.removeChild(m))}r={}},u=function(){return a};return{loadScripts:i,deleteScripts:o,getDocument:u}},Ae=function(){var a=[],r=function(o){var u=a.find(function(n){return n.getDocument()===o});return u===void 0&&(u=Fe(o),a.push(u)),u},l=function(o,u,n,c,d){var h=function(){return r(o).loadScripts(u,c,d)};n>0?setTimeout(h,n):h()},i=function(){for(var o=a.pop();o!=null;o=a.pop())o.deleteScripts()};return{loadList:l,reinitialize:i}},Ke=Ae(),He=function(){var a=function(r,l){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var u in o)Object.prototype.hasOwnProperty.call(o,u)&&(i[u]=o[u])},a(r,l)};return function(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");a(r,l);function i(){this.constructor=r}r.prototype=l===null?Object.create(l):(i.prototype=l.prototype,new i)}}(),O=function(){return O=Object.assign||function(a){for(var r,l=1,i=arguments.length;l<i;l++){r=arguments[l];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(a[o]=r[o])}return a},O.apply(this,arguments)},A="change keyup compositionend setcontent CommentChange",Ve=function(a){He(r,a);function r(l){var i,o,u,n=a.call(this,l)||this;return n.rollbackTimer=void 0,n.valueCursor=void 0,n.rollbackChange=function(){var c=n.editor,d=n.props.value;c&&d&&d!==n.currentContent&&c.undoManager.ignore(function(){if(c.setContent(d),n.valueCursor&&(!n.inline||c.hasFocus()))try{c.selection.moveToBookmark(n.valueCursor)}catch{}}),n.rollbackTimer=void 0},n.handleBeforeInput=function(c){if(n.props.value!==void 0&&n.props.value===n.currentContent&&n.editor&&(!n.inline||n.editor.hasFocus()))try{n.valueCursor=n.editor.selection.getBookmark(3)}catch{}},n.handleBeforeInputSpecial=function(c){(c.key==="Enter"||c.key==="Backspace"||c.key==="Delete")&&n.handleBeforeInput(c)},n.handleEditorChange=function(c){var d=n.editor;if(d&&d.initialized){var h=d.getContent();n.props.value!==void 0&&n.props.value!==h&&n.props.rollback!==!1&&(n.rollbackTimer||(n.rollbackTimer=window.setTimeout(n.rollbackChange,typeof n.props.rollback=="number"?n.props.rollback:200))),h!==n.currentContent&&(n.currentContent=h,F(n.props.onEditorChange)&&n.props.onEditorChange(h,d))}},n.handleEditorChangeSpecial=function(c){(c.key==="Backspace"||c.key==="Delete")&&n.handleEditorChange(c)},n.initialise=function(c){var d,h,m;c===void 0&&(c=0);var p=n.elementRef.current;if(p){if(!Be(p)){if(c===0)setTimeout(function(){return n.initialise(1)},1);else if(c<100)setTimeout(function(){return n.initialise(c+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var f=Me(n.view),v=O(O(O(O({},n.props.init),{selector:void 0,target:p,disabled:n.props.disabled,readonly:n.props.readonly,inline:n.inline,plugins:De((d=n.props.init)===null||d===void 0?void 0:d.plugins,n.props.plugins),toolbar:(h=n.props.toolbar)!==null&&h!==void 0?h:(m=n.props.init)===null||m===void 0?void 0:m.toolbar}),n.props.licenseKey?{license_key:n.props.licenseKey}:{}),{setup:function(g){n.editor=g,n.bindHandlers({}),n.inline&&!Q(p)&&g.once("PostRender",function(b){g.setContent(n.getInitialValue(),{no_events:!0})}),n.props.init&&F(n.props.init.setup)&&n.props.init.setup(g),n.props.disabled&&(ne(n.editor)?n.editor.options.set("disabled",n.props.disabled):n.editor.mode.set("readonly"))},init_instance_callback:function(g){var b,x=n.getInitialValue();n.currentContent=(b=n.currentContent)!==null&&b!==void 0?b:g.getContent(),n.currentContent!==x&&(n.currentContent=x,g.setContent(x),g.undoManager.clear(),g.undoManager.add(),g.setDirty(!1)),n.props.init&&F(n.props.init.init_instance_callback)&&n.props.init.init_instance_callback(g)}});n.inline||(p.style.visibility=""),Q(p)&&(p.value=n.getInitialValue()),f.init(v)}},n.id=n.props.id||ie("tiny-react"),n.elementRef=_.createRef(),n.inline=(u=(i=n.props.inline)!==null&&i!==void 0?i:(o=n.props.init)===null||o===void 0?void 0:o.inline)!==null&&u!==void 0?u:!1,n.boundHandlers={},n}return Object.defineProperty(r.prototype,"view",{get:function(){var l,i;return(i=(l=this.elementRef.current)===null||l===void 0?void 0:l.ownerDocument.defaultView)!==null&&i!==void 0?i:window},enumerable:!1,configurable:!0}),r.prototype.componentDidUpdate=function(l){var i=this,o,u;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(l),this.editor.initialized)){if(this.currentContent=(o=this.currentContent)!==null&&o!==void 0?o:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==l.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var n=this.editor;n.undoManager.transact(function(){var d;if(!i.inline||n.hasFocus())try{d=n.selection.getBookmark(3)}catch{}var h=i.valueCursor;if(n.setContent(i.props.value),!i.inline||n.hasFocus())for(var m=0,p=[d,h];m<p.length;m++){var f=p[m];if(f)try{n.selection.moveToBookmark(f),i.valueCursor=f;break}catch{}}})}if(this.props.readonly!==l.readonly){var c=(u=this.props.readonly)!==null&&u!==void 0?u:!1;ee(this.editor,c?"readonly":"design")}this.props.disabled!==l.disabled&&(ne(this.editor)?this.editor.options.set("disabled",this.props.disabled):ee(this.editor,this.props.disabled?"readonly":"design"))}},r.prototype.componentDidMount=function(){var l=this,i,o,u,n,c;if(ae(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(o=(i=this.props).onScriptsLoadError)===null||o===void 0||o.call(i,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((u=this.elementRef.current)===null||u===void 0)&&u.ownerDocument){var d=function(){var m,p;(p=(m=l.props).onScriptsLoad)===null||p===void 0||p.call(m),l.initialise()},h=function(m){var p,f;(f=(p=l.props).onScriptsLoadError)===null||f===void 0||f.call(p,m)};Ke.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(c=(n=this.props.scriptLoading)===null||n===void 0?void 0:n.delay)!==null&&c!==void 0?c:0,d,h)}},r.prototype.componentWillUnmount=function(){var l=this,i=this.editor;i&&(i.off(A,this.handleEditorChange),i.off(this.beforeInputEvent(),this.handleBeforeInput),i.off("keypress",this.handleEditorChangeSpecial),i.off("keydown",this.handleBeforeInputSpecial),i.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(o){i.off(o,l.boundHandlers[o])}),this.boundHandlers={},i.remove(),this.editor=void 0)},r.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},r.prototype.beforeInputEvent=function(){return Pe()?"beforeinput SelectionChange":"SelectionChange"},r.prototype.renderInline=function(){var l=this.props.tagName,i=l===void 0?"div":l;return _.createElement(i,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.renderIframe=function(){return _.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.getScriptSources=function(){var l,i,o=(l=this.props.scriptLoading)===null||l===void 0?void 0:l.async,u=(i=this.props.scriptLoading)===null||i===void 0?void 0:i.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:o,defer:u}]:this.props.tinymceScriptSrc.map(function(h){return typeof h=="string"?{src:h,async:o,defer:u}:h});var n=this.props.cloudChannel,c=this.props.apiKey?this.props.apiKey:"no-api-key",d="https://cdn.tiny.cloud/1/".concat(c,"/tinymce/").concat(n,"/tinymce.min.js");return[{src:d,async:o,defer:u}]},r.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},r.prototype.bindHandlers=function(l){var i=this;if(this.editor!==void 0){Le(this.editor,l,this.props,this.boundHandlers,function(c){return i.props[c]});var o=function(c){return c.onEditorChange!==void 0||c.value!==void 0},u=o(l),n=o(this.props);!u&&n?(this.editor.on(A,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):u&&!n&&(this.editor.off(A,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},r.propTypes=Te,r.defaultProps={cloudChannel:"8"},r}(_.Component);function $e({value:a,onChange:r,error:l,apiKey:i,height:o=400,...u}){const n=_.useRef(null),[c,d]=_.useState(!0),h=te(),m=h?.props?.csrf||h?.props?.csrf_token,p=i||"wd8psck8vz2ytw0tvmf35j244dbsek634tudlqprtbwxov16";return _.useEffect(()=>{if(n.current){const f=n.current.getContent(),v=a||"";f!==v&&n.current.setContent(v)}},[a]),e.jsxs("div",{className:"w-full relative",children:[c&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-base-200/80 backdrop-blur-sm rounded-lg z-10",style:{minHeight:`${o}px`},children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("span",{className:"loading loading-spinner loading-lg text-primary"}),e.jsx("p",{className:"text-sm text-base-content/70 font-medium",children:"Memuat editor..."})]})}),e.jsx("div",{className:c?"opacity-0":"opacity-100 transition-opacity duration-300",children:e.jsx(Ve,{apiKey:p,onInit:(f,v)=>{n.current=v,d(!1)},value:a||"",onEditorChange:f=>{r&&r(f)},init:{height:o,menubar:!0,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount"],toolbar:"undo redo | blocks | bold italic forecolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help | image | link | code",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }",branding:!1,promotion:!1,images_upload_handler:async f=>{try{const v=new FormData;v.append("file",f.blob(),f.filename());const g=m||document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",b=await fetch("/admin/upload-image",{method:"POST",headers:{"X-CSRF-TOKEN":g,Accept:"application/json"},body:v});if(!b.ok){const E=await b.json().catch(()=>({}));throw new Error(E.message||"Upload failed")}const x=await b.json();return x.url||x.path||x.location}catch(v){throw console.error("Image upload error:",v),new Error(v.message||"Image upload failed")}},file_picker_types:"image",automatic_uploads:!0,...u.init},...u})}),l&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:l})})]})}const ze=ke({kegiatan_id:I().nullable(),judul:I().required("Judul wajib diisi").max(255,"Judul maksimal 255 karakter"),isi:I().required("Isi berita wajib diisi"),tgl_pub:Se().transform((a,r)=>r?new Date(r):null).required("Tanggal publish wajib diisi").typeError("Tanggal publish harus berupa tanggal yang valid"),penulis:I().required("Penulis wajib diisi").max(255,"Penulis maksimal 255 karakter"),kat:I().required("Kategori wajib dipilih").oneOf(["pengumuman","acara","prestasi","info_umum"],"Kategori tidak valid"),foto_utama:Ne().nullable(),is_published:we().default(!1)}),K=[{value:"pengumuman",label:"Pengumuman"},{value:"acara",label:"Acara"},{value:"prestasi",label:"Prestasi"},{value:"info_umum",label:"Info Umum"}];function Ze({auth:a,berita:r,kegiatan:l,filters:i}){const{flash:o}=te().props,[u,n]=_.useState(!1),[c,d]=_.useState(!1),[h,m]=_.useState(!1),[p,f]=_.useState(null),[v,g]=_.useState(null),b=_.useRef(null);_.useEffect(()=>{o?.success&&L.success(o.success),o?.error&&L.error(o.error)},[o]);const{register:x,handleSubmit:E,reset:N,setValue:k,watch:$,control:se,formState:{errors:j,isSubmitting:z}}=ye({resolver:_e(ze),defaultValues:{kegiatan_id:"",judul:"",isi:"",tgl_pub:new Date().toISOString().split("T")[0],penulis:"",kat:"",foto_utama:null,is_published:!1}}),oe=$("is_published");$("foto_utama");const U=(s=null)=>{s?(f(s),k("kegiatan_id",s.kegiatan_id||""),k("judul",s.judul),k("isi",s.isi),k("tgl_pub",s.tgl_pub?new Date(s.tgl_pub).toISOString().split("T")[0]:""),k("penulis",s.penulis),k("kat",s.kat),k("foto_utama",null),k("is_published",s.is_published??!1),g(s.foto_utama?`/storage/${s.foto_utama}`:null)):(f(null),N({kegiatan_id:"",judul:"",isi:"",tgl_pub:new Date().toISOString().split("T")[0],penulis:"",kat:"",foto_utama:null,is_published:!1}),g(null)),n(!0)},D=()=>{n(!1),f(null),g(null),b.current&&(b.current.value=""),N({kegiatan_id:"",judul:"",isi:"",tgl_pub:new Date().toISOString().split("T")[0],penulis:"",kat:"",foto_utama:null,is_published:!1})},le=s=>{const y=s.target.files[0];if(y){k("foto_utama",y);const T=new FileReader;T.onloadend=()=>{g(T.result)},T.readAsDataURL(y)}},ce=s=>{const y=new FormData;s.kegiatan_id&&y.append("kegiatan_id",s.kegiatan_id),y.append("judul",s.judul),y.append("isi",s.isi);const T=s.tgl_pub instanceof Date?s.tgl_pub.toISOString().split("T")[0]:s.tgl_pub;y.append("tgl_pub",T),y.append("penulis",s.penulis),y.append("kat",s.kat),y.append("is_published",s.is_published?"1":"0"),s.foto_utama instanceof File&&y.append("foto_utama",s.foto_utama),p?(y.append("_method","PATCH"),C.post(`/admin/berita/${p.id}`,y,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{D()},onError:w=>{if(console.error("Update error:",w),w&&Object.keys(w).length>0&&!w.message){const S=Object.values(w)[0];L.error(Array.isArray(S)?S[0]:S)}}})):C.post("/admin/berita",y,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{N({kegiatan_id:"",judul:"",isi:"",tgl_pub:new Date().toISOString().split("T")[0],penulis:"",kat:"",foto_utama:null,is_published:!1}),g(null),b.current&&(b.current.value="")},onError:w=>{if(console.error("Create error:",w),w&&Object.keys(w).length>0&&!w.message){const S=Object.values(w)[0];L.error(Array.isArray(S)?S[0]:S)}}})},ue=s=>{f(s),d(!0)},de=()=>{p&&C.delete(`/admin/berita/${p.id}`,{preserveScroll:!0,onSuccess:()=>{d(!1),f(null)},onError:s=>{console.error("Delete error:",s),d(!1)}})},pe=s=>{C.get("/admin/berita",{...i,kat:s.target.value!==""?s.target.value:null},{preserveState:!0,replace:!0})},fe=s=>{C.get("/admin/berita",{...i,is_published:s.target.value!==""?s.target.value:null},{preserveState:!0,replace:!0})},he=s=>{C.get("/admin/berita",{...i,kegiatan_id:s.target.value!==""?s.target.value:null},{preserveState:!0,replace:!0})};return e.jsxs(xe,{auth:a,children:[e.jsx(me,{title:"Manajemen Berita"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center","data-aos":"fade-down",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-base-content",children:"Manajemen Berita"}),e.jsx("p",{className:"mt-1 text-base-content/70",children:"Kelola data berita dan pengumuman"})]}),e.jsxs(P,{onClick:()=>U(),className:"btn-primary",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})}),"Tambah Berita"]})]}),e.jsx("div",{className:"card bg-base-100 shadow-sm","data-aos":"fade-up","data-aos-delay":"100",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"grid grid-cols-1 items-end justify-end gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(be,{placeholder:"Cari berita...",defaultValue:i?.search||"",route:"/admin/berita",routeParams:i,debounceMs:500}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Filter Kategori"})}),e.jsxs("select",{className:"select-bordered select w-full",value:i?.kat||"",onChange:pe,children:[e.jsx("option",{value:"",children:"Semua Kategori"}),K.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Filter Status"})}),e.jsxs("select",{className:"select-bordered select w-full",value:i?.is_published!==void 0?String(i.is_published):"",onChange:fe,children:[e.jsx("option",{value:"",children:"Semua Status"}),e.jsx("option",{value:"1",children:"Published"}),e.jsx("option",{value:"0",children:"Draft"})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Filter Kegiatan"})}),e.jsxs("select",{className:"select-bordered select w-full",value:i?.kegiatan_id||"",onChange:he,children:[e.jsx("option",{value:"",children:"Semua Kegiatan"}),l.map(s=>e.jsxs("option",{value:s.id,children:[s.nm_kegiatan," - ",new Date(s.tgl_kegiatan).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})]},s.id))]})]})]})})}),e.jsx("div",{className:"card bg-base-100 shadow-sm","data-aos":"fade-up","data-aos-delay":"200",children:e.jsx("div",{className:"card-body",children:r.data.length===0?e.jsx("div",{className:"py-12 text-center text-base-content/70",children:"Tidak ada data berita"}):e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:r.data.map(s=>e.jsxs("div",{className:"card bg-base-200 shadow-sm",children:[s.foto_utama&&e.jsx("figure",{className:"aspect-video",children:e.jsx("img",{src:`/storage/${s.foto_utama}`,alt:s.judul,className:"h-full w-full object-cover"})}),e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("h3",{className:"card-title text-base line-clamp-2 flex-1",children:s.judul}),e.jsx("span",{className:"badge badge-primary badge-sm whitespace-nowrap",children:K.find(y=>y.value===s.kat)?.label||s.kat})]}),e.jsxs("div",{className:"mt-2 space-y-1 text-sm text-base-content/70",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),e.jsx("span",{children:s.penulis})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{children:new Date(s.tgl_pub).toLocaleDateString("id-ID")})]})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("div",{children:s.is_published?e.jsx("span",{className:"badge badge-success badge-sm",children:"Published"}):e.jsx("span",{className:"badge badge-warning badge-sm",children:"Draft"})}),e.jsxs("div",{className:"card-actions gap-2",children:[s.slug&&s.is_published&&e.jsxs("a",{href:`/berita/${s.slug}`,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary btn-xs",title:"Baca",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Baca"]}),e.jsx("button",{className:"btn btn-ghost btn-xs",onClick:()=>U(s),title:"Edit",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e.jsx("button",{className:"btn text-error btn-ghost btn-xs",onClick:()=>ue(s),title:"Hapus",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})]},s.id))})})}),r.links.length>3&&e.jsx("div",{className:"flex justify-center","data-aos":"fade-up","data-aos-delay":"300",children:e.jsx("div",{className:"join",children:r.links.map((s,y)=>e.jsx("button",{className:`btn join-item ${s.active?"btn-active":""} ${s.url?"":"btn-disabled"}`,onClick:()=>s.url&&C.get(s.url),dangerouslySetInnerHTML:{__html:s.label}},y))})}),e.jsx(ve,{isOpen:u,onClose:D,title:p?"Edit Berita":"Tambah Berita",size:"5xl",children:e.jsxs("form",{onSubmit:E(ce),className:"space-y-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Kegiatan (Opsional)"})}),e.jsxs("select",{className:"select-bordered select w-full",...x("kegiatan_id"),children:[e.jsx("option",{value:"",children:"Pilih Kegiatan"}),l.map(s=>e.jsxs("option",{value:s.id,children:[s.nm_kegiatan," - ",new Date(s.tgl_kegiatan).toLocaleDateString("id-ID",{year:"numeric",month:"long",day:"numeric"})]},s.id))]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Judul ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{type:"text",className:`input-bordered input w-full ${j.judul?"input-error":""}`,...x("judul"),placeholder:"Masukkan judul berita"}),j.judul&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:j.judul.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Isi Berita ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx(je,{name:"isi",control:se,render:({field:s})=>e.jsx($e,{value:s.value||"",onChange:s.onChange,error:j.isi?.message,height:400})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Tanggal Publish ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{type:"date",className:`input-bordered input w-full ${j.tgl_pub?"input-error":""}`,...x("tgl_pub")}),j.tgl_pub&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:j.tgl_pub.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Penulis ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsx("input",{type:"text",className:`input-bordered input w-full ${j.penulis?"input-error":""}`,...x("penulis"),placeholder:"Masukkan nama penulis"}),j.penulis&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:j.penulis.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsxs("span",{className:"label-text",children:["Kategori ",e.jsx("span",{className:"text-error",children:"*"})]})}),e.jsxs("select",{className:`select-bordered select w-full ${j.kat?"select-error":""}`,...x("kat"),children:[e.jsx("option",{value:"",children:"Pilih Kategori"}),K.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),j.kat&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:j.kat.message})})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Foto Utama (Opsional)"})}),e.jsx("input",{ref:b,type:"file",accept:"image/*",className:"file-input-bordered file-input w-full",onChange:le}),v&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:v,alt:"Preview",className:"max-h-64 rounded-lg object-cover"})}),j.foto_utama&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:j.foto_utama.message})})]}),e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"label cursor-pointer",children:[e.jsx("span",{className:"label-text",children:"Published"}),e.jsx("input",{type:"checkbox",className:"toggle toggle-primary",checked:oe,...x("is_published")})]})}),e.jsxs("div",{className:"modal-action",children:[e.jsx(P,{type:"button",onClick:D,className:"btn-ghost",children:"Batal"}),e.jsx(P,{type:"submit",className:"btn-primary",disabled:z,children:z?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"loading loading-sm loading-spinner"}),p?"Menyimpan...":"Menambahkan..."]}):p?"Simpan Perubahan":"Tambah Berita"})]})]})}),e.jsx(ge,{isOpen:c,onClose:()=>{d(!1),f(null)},onConfirm:de,title:"Hapus Berita",message:`Apakah Anda yakin ingin menghapus berita "${p?.judul}"?`})]})]})}export{Ze as default};
